<!DOCTYPE html>
<html class="js svgfilters flexbox no-safari no-ie-or-edge" lang="en-GB"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <!-- base href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/" -->

        

    <script type="text/javascript" async="" src="lab4_files/inpage_linkid.js" id="undefined"></script><script src="lab4_files/571252266361666" async=""></script><script async="" src="lab4_files/fbevents.js"></script><script type="text/javascript" async="" src="lab4_files/analytics.js"></script><script type="text/javascript" async="" src="lab4_files/linkid.js"></script><script async="" src="lab4_files/analytics.js"></script><script async="" src="lab4_files/gtm.js"></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document, 'script','dataLayer', 'GTM-55N43RF');</script>





<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>CS133 Lab 4: Advanced Scripting and Regular Expressions</title>

<meta name="description" content="">
<meta name="keywords" content="CS133, Professional Skills, Pro Skills, Lab 4">

<link rel="search" type="application/opensearchdescription+xml" title="Warwick Search" href="https://search.warwick.ac.uk/static/search/osd.xml">

<!-- Google canonical URL - the main URL for this page -->

    
    
        <link rel="canonical" href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/">
    




  



    <meta name="robots" content="noindex,nofollow">


<link rel="apple-touch-icon" sizes="57x57" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://warwick.ac.uk/static_war/render/id7/images/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="https://warwick.ac.uk/static_war/render/id7/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://warwick.ac.uk/static_war/render/id7/images/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="https://warwick.ac.uk/static_war/render/id7/images/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://warwick.ac.uk/static_war/render/id7/images/favicon-16x16.png" sizes="16x16">
<meta name="msapplication-TileImage" content="https://warwick.ac.uk/static_war/render/id7/images/mstile-144x144.png">


    
        <meta name="msapplication-TileColor" content="#3f4246">
        <meta name="theme-color" content="#3f4246">
    
    





<link href="lab4_files/css.css" rel="stylesheet" type="text/css">


    
    
        <link rel="stylesheet" href="lab4_files/pack7.css" type="text/css">
    




    
    
    
        <link rel="shortcut icon" type="image/x-icon" href="https://warwick.ac.uk/static_war/render/id7/images/favicon.ico">
    





    <link rel="stylesheet" href="lab4_files/site.css" type="text/css">







    
    
        <script type="text/javascript" src="lab4_files/id7scripts.js"></script>
    





    <script type="text/javascript" src="lab4_files/site.js"></script>


<!-- HTML5 shim for IE8 support of HTML5 elements -->

<!--[if lt IE 9]>
<script type="text/javascript" src="https://warwick.ac.uk/static_war/render/scripts/html5shiv-3.7.2.min.js.1540900231420"></script>
<![endif]-->




<script type="text/javascript">
    SitebuilderInfo.url = '/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4';
    SitebuilderInfo.lastUpdated = 1539013909706;
    SitebuilderInfo.lastContentUpdated = 1537808025797;
    SitebuilderInfo.buildTimestamp = '1540900231420';
</script>









<link rel="alternate" type="application/rss+xml" title="Changes in /fac/sci/dcs/ (RSS 2.0)" href="https://warwick.ac.uk/sitebuilder2/api/rss/siteChanges.rss?page=/fac/sci/dcs">










    

    
        
            
            
            
            
                <script type="text/javascript">
Event.onDOMReady(function() { var email2146128218 = '<a href="mai';
email2146128218 += 'lto:&#99;';
email2146128218 += '&#111;&#109;&#112;&#x2';
email2146128218 += 'd;&#115;&#x63;&#x69;';
email2146128218 += '&#x40;&#100;';
email2146128218 += '&#9';
email2146128218 += '9;&#115';
email2146128218 += ';&#46;&#';
email2146128218 += '119;&#97;&#x72;&#x77;&#x69;';
email2146128218 += '&#9';
email2146128218 += '9;&#x6b;&#46;&#97;&#99;&#x2e;&#117;&#107;">&#99;&#11';
email2146128218 += '1;&#x6d;&#x70;&#45;&#x73;&#99;&';
email2146128218 += '#105;&#64;';
email2146128218 += '&#100;&#99;&#';
email2146128218 += '115;&#46;&#x77;&#x61;&#114;&#119;&#105;&#x63;&#107;&#x2e;&#97;&#x63;';
email2146128218 += '&#x2e;&#x75;&#107;<\/a>';
if(document.getElementById('email2146128218')) document.getElementById('email2146128218').innerHTML = email2146128218;
});
</script>
            
        
    

    <script async="" src="lab4_files/hotjar-762048.js"></script><script async="" src="lab4_files/modules-239439752d7ca7c58c060cde4a84a63c.js"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style><script src="lab4_files/ga.js" type="text/javascript" async=""></script></head>

    
    
    
    
        
    

    <body class="in-fac in-sci in-dcs in-teaching in-material in-cs133 in-term1 in-labs in-lab4">
        

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-55N43RF"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>



        <div class="id7-left-border"></div>
        <div class="id7-fixed-width-container">

            <a class="sr-only sr-only-focusable" href="#main">Skip to main content</a>

            <header class="id7-page-header">
                <div class="id7-utility-masthead">
    <nav class="id7-utility-bar">
    <ul>
        
            

            
                
<li id="toggle-text-only-link"><a accesskey="t" href="https://text.www2.warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/?external=true" rel="nofollow" class="ut">Text only</a> </li>
            

            
                
                    
                    
<li id="notify-link"><a href="https://warwick.ac.uk/sitebuilder2/user/page/notifications.htm?page=/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/" rel="nofollow" class="ut">Notify</a> </li>
                
            

            

            
        

        
            
                
                
                
                    
                        
<li id="account-link" data-hj-suppress=""><a href="https://websignon.warwick.ac.uk/origin/logout?target=https%3A%2F%2Fwarwick.ac.uk%2Ffac%2Fsci%2Fdcs%2Fteaching%2Fmaterial%2Fcs133%2Fterm1%2Flabs%2Flab4%2F" rel="nofollow" class="ut" data-toggle="id7:account-popover" data-loginlink="https://websignon.warwick.ac.uk/origin/slogin?shire=https%3A%2F%2Fwww2.warwick.ac.uk%2Fsitebuilder2%2Fshire-read&amp;providerId=urn%3Awww2.warwick.ac.uk%3Asitebuilder2%3Aread%3Aservice&amp;target=https%3A%2F%2Fwarwick.ac.uk%2Ffac%2Fsci%2Fdcs%2Fteaching%2Fmaterial%2Fcs133%2Fterm1%2Flabs%2Flab4%2F" data-usercode="u1800580" data-name="Matthew Bardsley" data-original-title="" title="">Matthew Bardsley<span class="fa-stack id7-notifications-badge" style="">  <i class="fa fa-circle fa-stack-2x"></i>  <strong class="fa-stack-1x fa brand-text counter-value slideInDown">0</strong> </span><span class="caret"></span></a> </li>
                    
                    
                
            
            
        
    </ul>
</nav>
    <div class="id7-masthead">
    <div class="id7-masthead-contents">
        <div class="clearfix">
            <div class="id7-logo-column">
                
                    <div class="id7-logo-row">
                        <div class="id7-logo">
                            <a href="https://warwick.ac.uk/" title="Warwick home page">
                                <img src="lab4_files/shim.gif" alt="Warwick">
                            </a>
                        </div>

                        
                            
                            
                                <nav class="id7-site-links">
                                    <ul>
                                        <li><a href="https://warwick.ac.uk/study">Study</a></li>
                                        <li><a href="https://warwick.ac.uk/research">Research</a></li>
                                        <li><a href="https://warwick.ac.uk/business">Business</a></li>
                                        <li><a href="https://warwick.ac.uk/alumni">Alumni</a></li>
                                        <li><a href="https://warwick.ac.uk/news">News</a></li>
                                        <li><a href="https://warwick.ac.uk/engagement">Engagement</a></li>
                                    </ul>
                                </nav>
                            
                        
                    </div>
                
            </div>
            <div class="id7-search-column">
                
                    <div class="id7-search">
                        <form action="//search.warwick.ac.uk/website" role="search">
                            <input name="source" value="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/" type="hidden">
                            <div class="form-group">
                                <label class="sr-only" for="id7-search-box">Search</label>
                                <div class="id7-search-box-container">
                                    <span class="twitter-typeahead" style="position: relative; display: inline-block;"><input class="form-control input-lg tt-input" id="id7-search-box" name="q" placeholder="Search Warwick" data-suggest="go" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;" type="search"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Lato, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 18px; font-style: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></pre><div class="tt-menu" style="position: absolute; top: 100%; left: 0px; z-index: 100; display: none;"><div class="tt-dataset tt-dataset-go"></div></div></span>
                                    <i class="fa fa-search fa-2x"></i>
                                </div>
                            </div>
                        </form>
                    </div>
                
            </div>
        </div>

        <div class="id7-header-text clearfix" style="height: 54px;">
            <h1 class="headroom headroom--not-bottom headroom--not-top affix headroom--pinned">
                

                
                

                <span class="id7-current-site-link visible-xs-inline">
                    <a accesskey="1" title="Computer Science home page [1]" href="https://warwick.ac.uk/fac/sci/dcs/">DCS</a>
                </span><span class="id7-current-site-link hidden-xs">
                    <a accesskey="1" title="Computer Science home page [1]" href="https://warwick.ac.uk/fac/sci/dcs/">Department of Computer Science</a>
                </span>
            </h1>
        </div>
    </div>
</div>

</div>

                
                <div class="id7-navigation headroom headroom--not-bottom affix headroom--not-top headroom--pinned">
                    <nav class="navbar navbar-primary hidden-xs" role="navigation"> <ul class="nav navbar-nav"><li class="first dropdown" data-lastmodified="1540020552383"> <a href="https://warwick.ac.uk/fac/sci/dcs/admissions/" data-page-url="/fac/sci/dcs/admissions/"> Admissions </a> <ul class="dropdown-menu" role="menu"><li data-lastmodified="1539687107714"> <a href="https://warwick.ac.uk/fac/sci/dcs/admissions/undergraduate/" data-page-url="/fac/sci/dcs/admissions/undergraduate/"> Undergraduate </a> </li><li data-lastmodified="1538409613119"> <a href="https://warwick.ac.uk/fac/sci/dcs/admissions/postgraduate/" data-page-url="/fac/sci/dcs/admissions/postgraduate/"> Postgraduate Taught </a> </li><li data-lastmodified="1538409613119"> <a href="https://warwick.ac.uk/fac/sci/dcs/admissions/postgraduateresearch/" data-page-url="/fac/sci/dcs/admissions/postgraduateresearch/"> Postgraduate Research </a> </li></ul> </li><li class="next-secondary active second dropdown" data-lastmodified="1540391869715"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/" data-page-url="/fac/sci/dcs/teaching/"> Teaching </a> <ul class="dropdown-menu" role="menu"><li data-lastmodified="1538379239658"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/courses/" data-page-url="/fac/sci/dcs/teaching/courses/"> Course Structures </a> </li><li class="protected" data-lastmodified="1538399760231"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/handbook/" data-page-url="/fac/sci/dcs/teaching/handbook/"> Student Handbook <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a> </li><li class="protected" data-lastmodified="1538379239658"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/phd/" data-page-url="/fac/sci/dcs/teaching/phd/"> Research Student Handbook <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a> </li><li class="protected recently-updated" data-lastmodified="1540853203227"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/" data-page-url="/fac/sci/dcs/teaching/material/"> Online Material <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a> </li></ul> </li><li class="recently-updated" data-lastmodified="1541073405036"> <a href="https://warwick.ac.uk/fac/sci/dcs/research/" data-page-url="/fac/sci/dcs/research/"> Research </a></li><li class="recently-updated" data-lastmodified="1540641884283"> <a href="https://warwick.ac.uk/fac/sci/dcs/people/" data-page-url="/fac/sci/dcs/people/"> People </a></li><li class="recently-updated" data-lastmodified="1540896038638"> <a href="https://warwick.ac.uk/fac/sci/dcs/events/" data-page-url="/fac/sci/dcs/events/"> Events </a></li><li class="dropdown" data-lastmodified="1537970886164"> <a href="https://warwick.ac.uk/fac/sci/dcs/jobs/" data-page-url="/fac/sci/dcs/jobs/"> Vacancies </a> <ul class="dropdown-menu" role="menu"><li data-lastmodified="1537970886164"> <a href="https://warwick.ac.uk/fac/sci/dcs/jobs/research_fellowships/" data-page-url="/fac/sci/dcs/jobs/research_fellowships/"> Research Fellowships </a> </li></ul> </li><li class="protected" data-lastmodified="1537970886164" style=""> <a href="https://warwick.ac.uk/fac/sci/dcs/intranet/" data-page-url="/fac/sci/dcs/intranet/"> Intranet <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li></ul></nav><nav class="navbar navbar-secondary" role="navigation"> <ul class="nav navbar-nav"><li class="nav-breadcrumb first" data-lastmodified="1540391869715"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/" data-page-url="/fac/sci/dcs/teaching/"> Teaching </a></li><li class="nav-breadcrumb second protected recently-updated" data-lastmodified="1540853203227"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/" data-page-url="/fac/sci/dcs/teaching/material/"> Online Material <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li><li class="nav-breadcrumb protected recently-updated" data-lastmodified="1540853203227"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/" data-page-url="/fac/sci/dcs/teaching/material/cs133/"> CS133 <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li><li class="nav-breadcrumb protected recently-updated" data-lastmodified="1541001744796"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/" data-page-url="/fac/sci/dcs/teaching/material/cs133/term1/"> Term 1 <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li><li class="nav-breadcrumb protected recently-updated" data-lastmodified="1540539566439"> <a href="https://warwick.ac.uk/fac/sci/dcs/teaching/material/cs133/term1/labs/" data-page-url="/fac/sci/dcs/teaching/material/cs133/term1/labs/"> Labs <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li><li class="active nav-breadcrumb last protected" data-lastmodified="1539013909706" style=""> <a data-page-url="/fac/sci/dcs/teaching/material/cs133/term1/labs/lab4/"> Lab 4 <i class="fa fa-lock discreet" title="Restricted permissions"></i> </a></li></ul></nav>
                </div><div class="id7-navigation-marker" style="height: 70px;"></div>
            </header>

            
            <main id="main" class="id7-main-content-area">
                <header>
                    <div class="id7-horizontal-divider">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" version="1.1" width="1130" height="41" viewBox="0, 0, 1130, 41">
                            <path d="m 0,0.5 1030.48, 0 22.8,40 16.96,-31.4 16.96,31.4 22.8,-40 20,0" class="divider" stroke="#383838" fill="none"></path>
                        </svg>
                    </div>

                    <div class="id7-page-title">
                        <h1>
                            
                            
                                CS133 Lab 4: Advanced Scripting and Regular Expressions
                            
                        </h1>
                    </div>
                </header>

                

                
                <div class="id7-main-content">
                    

                    <div class="layout layout-100">
                        <div class="column-1"><div class="column-1-content">
                            
                                
                                    

<div class="boxstyle_ box3">
  <p>This Lab Sheet contains <strong>three</strong> Marking Points</p>

</div>

<p>You have now gained some familiarity with a Linux environment, 
studied the management of processes and developed a working knowledge of
 scripting. The aim of this lab session is to further develop your 
scripting abilities through functions and equip you with a basic 
understaning of regular expressions - a very useful mechanism that 
allows you to process text by specifying a pattern for a string to be 
matched or replaced. Since it will be very difficult for you to 
appreciate the significance and applicability of regular expressions in 
just one lab, you are strongly encouraged to read about them in the 
module lecture note and relevant textbooks.</p>

<p>If you find these exercises too difficult, you may find it useful to look at the <code>infotutorial</code> script, from lab 1, which contains several examples.</p>

<p>Remember to record what you have done for this lab in your lab diary.</p>

<h3>Advanced Scripting</h3>

<p>Having got to grips with the basics of bash scripting we will now look at a few more complex scripting exercises.</p>

<p>Functions in bash are a useful way to ensure that you don't have to 
repeatedly write similar code. Much like their counterparts in C and 
Java, a function can be viewed as a block of code that implements a set 
of operations. You can think of it as being like a <span class="QUOTE">black-box</span>
 that performs a specified task. Wherever you have repetitive code or a 
task being repeated with only slight variations then you should consider
 using a function.</p>

<p>There are two ways to declare a function in bash, both of which are 
shown in the examples below. The second of these structures should be 
particularly familiar if you have done amount of C programming.</p>

<pre><span class="bluebox2">function function_name {<br>     echo "Hello"<br>}</span><br><span class="bluebox2">function_name () {<br>    echo "Hello"<br>}</span></pre>
<p>There are a few key things to remember when writing functions:</p>

<ul>
  <li>Calls to functions are made by simply using the name of the function you wish to call.</li>
  <li>The definition of a function must precede the first call to it.</li>
  <li>The body of functions can not be empty.</li>
  <li>It is possible to nest functions within functions and other 
control structures, though this is not particularly useful or advisable.</li>
</ul>

<p>There are also a few key differences between functions in bash and other programming languages:</p>

<ul>
  <li>Bash functions do not allow you to return arbitrary values to the 
caller; they instead return their status: zero for success, non-zero for
 failure. Whilst this matches how most Linux programs return, it can 
seem a little counter-intuitive at times. If you want to return a result
 there are a couple of ways to do so. Look into the idea of scoping in 
Bash and see if you can think of some.</li>
  <li>Bash functions also handle parameters differently than many pure 
programming languages you may have encountered. Rather than having named
 parameters, bash simply refers to the first parameter as <code>$1</code>, the second as <code>$2</code>, etc. Compare this with how you referred to variables passed to the <em>script</em> in earlier labs. As such, you don't specify parameters when defining the function signature.</li>
</ul>

<p>To give you a more concrete understanding of functions in bash you should try to implement a function called <code>fib</code>
 that will calculate the nth fibonacci number. To help you out with the 
some of the practicalities, a function which is designed to use your <code>fib</code> is given below.</p>

<pre><span class="bluebox2">function main {<br>    echo "What fib should I calculate?"<br>    read n<br>    fib $n<br>    exit 0<br>}</span></pre>
<p>Remember to actually call this main function in your script!</p>

<div class="boxstyle_ box3">
  <p><strong>Marking Point 4.1 - call a tutor</strong>  </p>

  <p>Show your tutor your fibonacci function and that when called with the number 6 your function prints 8.</p>

</div>

<p>Input/Output (I/O) Redirection is another important issue when 
scripting in a UNIX environment. There are always three default files 
open, <code>stdin</code> (the keyboard), <code>stdout</code> (the screen), and <code>stderr</code>
 (error messages output to the screen). These, as well as any other open
 files, can be redirected. Redirection simply means capturing output 
from a file, command, application or script, and sending it as input to 
another file, command, application or script. Every open file gets 
assigned a file descriptor. The file descriptors for <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> are 0, 1, and 2, respectively.</p>

<p>A simple example showing redirection to a file is shown below.</p>

<pre><span class="bluebox2">$ ls &gt; myfiles.txt</span></pre>
<p>In this example the <code>ls</code> command is executed and the results are written in a file called myfiles.txt. Since the output of <code>ls</code>
 was redirected to the file, no output will appear in the terminal 
window. Whenever the command above is repeated, myfiles.txt is 
overwritten with the output of the <code>ls</code> command. If you would like the new results to be appended to the file instead you can use the <code>&gt;&gt;</code> operator. Be sure to try this for yourself.</p>

<p>Often commands can take input from <code>stdin</code>. By default, 
standard input gets its contents from the keyboard, but just like 
standard output it can be redirected. To redirect standard input from a 
file instead of the keyboard by using the <code>&lt;</code> operator. Do
 a little reseach on this operator and try to redirect standard input 
from a file for yourself. You should also try to redirect both the input
 and output of a command. How might this be useful?</p>

<p>Probably the most useful thing you can do with I/O redirection is to 
connect multiple commands together using pipes. With pipes, the standard
 output of one command is fed into the standard input of another. An 
example of this is shown below.</p>

<pre><span class="bluebox2">$ ls -lt | head</span></pre>
<p>Can you see what is happening here? What does the <code>head</code> command do?</p>

<p>The <code>head</code> command used in the example above is an example
 of a filter. There are many filters that you can use, including common 
ones such as <code>grep</code>, <code>tail</code>, <code>sort</code>, <code>awk</code> and <code>sed</code>. You should experiment with these filters to familiarise yourself with their usage.</p>

<div class="boxstyle_ box3">
  <p><strong>Marking Point 4.2 - call a tutor </strong>  </p>

  <p>Show the tutor how you would discover how many processes you own.</p>

</div>

<h3>Regular Expressions</h3>

<p>There are several varieties of regular expressions, including basic, 
extended and many others. We will focus on basic regular expressions 
(BRE), which is what the <code>grep</code> and <code>sed</code> commands
 use by default. You will find many good references for basic regular 
expressions online, so do take the time to find one that you are 
comfortable with. An online regex checker is also linked at the bottom 
of this page but be aware that this works with extended regular 
expressions and so may not be fully compatible with what you wish to 
test.</p>

<p>The <code>grep</code> command is used for selecting lines. You have already met the <code>grep</code>
 command in the context of selecting lines from input based on a 
specified string. To base this selection on a set of possible strings, 
rather than on a single string, you can specify a regular expression 
rather than a string. For instance, if for some reason you want to 
select all lines that contain either <code>echo</code> or <code>printf</code> in the <code>infotutorial</code> script, here is how you would do it:</p>

<pre><span class="bluebox2">$ cat ./infotutorial | grep 'echo\|printf'</span></pre>
<p>Can you generalise this statement to find all lines that contain a 
number? There is a simple way of doing this by using [ and ], as shown 
in the <a href="http://www.zytrax.com/tech/web/regex.htm">reference</a> page. Try to achieve the same result using this simple method.</p>

<p>Suppose now that you wanted to find all 5 letter words that end in 
'ing'. You can use a regular expression combined with the dictionary <code>/usr/share/dict/words</code> to do this. Note that the simple use of <code>grep</code> shown below will not work, as this finds any word that contains 'ing' anywhere in it.</p>

<pre><span class="bluebox2">$ cat /usr/share/dict/words | grep "ing"</span></pre>
<p>You can resolve this problem using a regular expression.</p>

<pre><span class="bluebox2">$ cat /usr/share/dict/words | grep '^..ing$'</span></pre>
<p>In the this command, <code>^</code> denotes the beginning of a line, <code>$</code>
 means the end of line and a dot matches any character. A more general 
solution exists, where you can specify how many characters you want 
using <code>{n}</code>. You should combine this with [ ] to select all 
words where the first 2 letters are vowels and the word ends with 'ing' 
but the word can otherwise be any length. You may find you need to 
escape the braces with <code>\</code>; this is one of the downsides of BREs and is something dealt with in <a href="https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended">extended regular expressions</a> (ERE). Consult the man pages for grep and sed to see how to make them use ERE instead of BRE.</p>

<p>Now suppose you wanted to find and replace some words in a text file.
 You could do this manually using find and replace in a text editor. 
However, you could also write a script to automate the task. Here is an 
example which replaces 'plus' with '+':</p>

<pre><span class="bluebox2">$ echo "x is 5 plus 6" | sed 's/plus/+/g'</span></pre>
<p>We now use <code>sed</code> instead of <code>grep</code>. In the expression <code>s/plus/+/g</code>,
 the 's' means substitute the second part (separated by '/') for the 
first and the 'g' means do this everywhere rather than just on the first
 occurrence (i.e. "global"). In a previous week you wrote a <code>sum</code> script using a <code>for</code>
 loop. It is possible to achieve the same effect in one line (without 
error checking) using regular expressions. Below is a template, can you 
fill in the regular expression? Think about the form of input that <code>expr</code> takes.</p>

<pre><span class="bluebox2">#!/bin/bash<br>expr $(echo $* | sed '')<br>exit 0</span></pre>
<p>Something more challenging than finding words in the dictionary is 
finding words in a piece of text. Suppose you wanted to extract all 
words in this web page (save the webpage's HTML as lab4.html) which 
start with 'w'. The following expression will almost do this:</p>

<pre><span class="bluebox2">$ cat ./lab4.html | sed 's/[^a-z][^w][a-z]*//g'</span></pre>
<p>To improve the result you could first remove all html tags. Try doing
 this and see if it gives a better result. You can explore further 
possible improvements by trial and error, but don't worry too much about
 getting this perfect.</p>

<p>Sometimes you need to use a string that was matched in a pattern when
 making a substitution. This can be done by identifying one or more 
groups of characters in the match by putting <code>\( \)</code> around part of the pattern and then using <code>\1</code> or <code>\2</code> etc to designate these groups in making the substitution. An example of this is given below (although note that <code>finger</code> is not installed on all machines, but it should be working on joshua).</p>

<pre><span class="bluebox2">$ finger -m $(whoami) | head -n 1 | sed 's/^.*Name: \([A-Za-z]\+\)/\1/'</span></pre>
<p>Play around with these expressions. Trial and error really is the 
only way to learn regular expressions. Come up with your own problems 
and document your solutions in your lab diary.</p>

<div class="boxstyle_ box3">
  <p><strong>Marking Point 4.3 - call a tutor</strong>  </p>

  <p>Show the tutor how to use <code>grep</code> and a regular expression to list all files in the current directory which are world readable.</p>

</div>

<h3>Further Resources</h3>

<ul>
  <li><a href="http://www.regexr.com/">RegExr</a> - an online regex checker</li>
</ul>

<ul>
  <li>
    <p>If you want to learn more about Linux, Bash or shell scripting in general please check out the tutorials available <a href="http://bash.cyberciti.biz/guide/Main_Page">here</a>.
 This guide offers an indepth view of many different areas of shell 
scripting and will serve as a good complement to the course for either 
those who want to study more or need to brush up.</p>

  </li>
</ul>



                                
                                
                            
                        </div></div>
                        
                    </div>
                    
                </div>

                
            </main>

            

            

    
    


<footer class="id7-page-footer id7-footer-coloured">
    <div class="id7-site-footer">

        

        
        

        

        
            
            
                
            
        

        <div class="pull-left"> 
  <p>Department of Computer Science, University of Warwick, CV4 7AL <br>
     E-mail: <span id="email2146128218"><a href="mailto:comp-sci@dcs.warwick.ac.uk">comp-sci@dcs.warwick.ac.uk</a></span>, Telephone: <a href="tel:+442476523193">+44 (0)24 7652 3193</a>  </p>

</div>

<div class="pull-right fa-social-icons brand-text"><a href="https://www.facebook.com/warwickdcs/" title="DCS on Facebook"><i class="fa fa-facebook fa-3x fa-fw"></i><span class="sr-only">Facebook</span></a> <a href="https://twitter.com/WarwickDCS" title="DCS on Twitter"><i class="fa fa-twitter fa-3x fa-fw"></i><span class="sr-only">Twitter</span></a> <a href="https://www.linkedin.com/grps?gid=38372" title="DCS on LinkedIn"><i class="fa fa-linkedin fa-3x fa-fw"></i><span class="sr-only">YouTube</span></a></div>


    </div>
    <div class="id7-app-footer">

        
            <div class="id7-logo-bleed"></div>
        

        
            <div id="page-footer-elements" class="nofollow clearfix page-footer-elements">
                <ul>
                    






 
  
  
  
  
  
  
	
	Page contact: <a id="email-owner-link" href="https://warwick.ac.uk/sitebuilder2/api/ajax/emailOwner.htm?page=%2Ffac%2Fsci%2Fdcs%2Fteaching%2Fmaterial%2Fcs133%2Fterm1%2Flabs%2Flab4" class="no-print-expand" title="Send an email to Mike Joy" rel="nofollow">Mike Joy</a>
  

<br>
                    Last revised: Mon 24 Sep 2018
                </ul>
            </div>
        

        <div class="id7-footer-utility">
            <ul>
                <li id="powered-by-link">
                    Powered by <a href="https://warwick.ac.uk/sitebuilder" title="More information about SiteBuilder">Sitebuilder</a>
                </li>

                
                    
                    
                        
                        
                        
                        
                        
                    
                

                <li id="copyright-link"><a href="http://warwick.ac.uk/copyright" title="Copyright Statement">© MMXVIII</a></li>

                
                    <li id="terms-link"><a href="http://warwick.ac.uk/terms/general" title="Terms of use">Terms</a></li>
                

                <li id="privacy-link"><a href="http://warwick.ac.uk/privacy" title="Privacy statement">Privacy</a></li>

                <li id="cookies-link"><a href="http://warwick.ac.uk/cookies" title="Information about cookies">Cookies</a></li>

                <li id="accessibility-link"><a href="https://warwick.ac.uk/accessibility" title="Accessibility information [0]" accesskey="0">Accessibility</a></li>

                
            </ul>
        </div>
    </div>
</footer>
        </div>
        <div class="id7-right-border"></div>

        
		
	
	

	

<!-- New analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('require', 'linkid', 'linkid.js');



ga('create', 'UA-40911470-1', 'auto', 'global1');
ga('global1.set', 'anonymizeIp', true);
ga('global1.send', 'pageview', '\/fac\/sci\/dcs\/teaching\/material\/cs133\/term1\/labs\/lab4');





	
	
var _gaq = _gaq || [];
_gaq.push (['_gat._anonymizeIp']);
_gaq.push(['_require', 'inpage_linkid', '//www.google-analytics.com/plugins/ga/inpage_linkid.js']);
_gaq.push(['site._setAccount', 'UA-27588828-1']);
_gaq.push(['site._trackPageview', '\/fac\/sci\/dcs\/teaching\/material\/cs133\/term1\/labs\/lab4']);
_gaq.push(['site._trackPageLoadTime']);

var analyticsLoad = function() {
	var s    = document.createElement('script');
	s.src    = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	s.type   = "text/javascript";
	s.async  = true;
	(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(s);
};
if (window.Event && Event.observe) {
	Event.observe(window, 'load', analyticsLoad);
} else {
	var oldLoad = window.onload;
	window.onload = function() {
		if (typeof oldLoad == 'function') oldLoad();
		analyticsLoad();
	};
}
	


</script>


    

<div style="display: none; visibility: hidden;"> <img src="lab4_files/px.json" width="1" height="1"></div>
<script type="text/javascript" id="">(function(a,c,e,f,d,b){a.hj=a.hj||function(){(a.hj.q=a.hj.q||[]).push(arguments)};a._hjSettings={hjid:762048,hjsv:6};d=c.getElementsByTagName("head")[0];b=c.createElement("script");b.async=1;b.src=e+a._hjSettings.hjid+f+a._hjSettings.hjsv;d.appendChild(b)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv\x3d");</script><script type="text/javascript" id="">(function(a){a(document).ready(function(){a("#account-link").attr("data-hj-suppress","")})})(window.jQuery);</script>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","571252266361666");fbq("track","PageView");</script>
<noscript>
<img height="1" width="1" src="https://www.facebook.com/tr?id=571252266361666&amp;ev=PageView
&amp;noscript=1">
</noscript>

<iframe style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;" name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="lab4_files/rcj-da10bd4908deb9e19dfde013ec3fe4ff.html"></iframe><div id="ads"></div><div class="modal image-modal" id="image-modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body"></div><div style="line-height: normal; text-align: left;" class="modal-footer"></div><i class="image-controls left fa fa-chevron-left fa-2x"></i><i class="image-controls right fa fa-chevron-right fa-2x"></i></div></div></div></body></html>